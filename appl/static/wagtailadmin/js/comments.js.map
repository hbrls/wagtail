{"version":3,"sources":["webpack://wagtail/webpack/runtime/chunk loaded","webpack://wagtail/./node_modules/dateformat/lib/dateformat.js","webpack://wagtail/./node_modules/immer/dist/immer.esm.js","webpack://wagtail/./node_modules/reselect/es/index.js","webpack://wagtail/./client/src/components/CommentApp/actions/comments.ts","webpack://wagtail/./client/src/components/CommentApp/actions/settings.ts","webpack://wagtail/./client/src/components/CommentApp/components/Comment/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/CommentHeader/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/CommentReply/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/Form/index.tsx","webpack://wagtail/./client/src/components/CommentApp/components/TextArea/index.tsx","webpack://wagtail/./client/src/components/CommentApp/main.tsx","webpack://wagtail/./client/src/components/CommentApp/selectors/index.ts","webpack://wagtail/./client/src/components/CommentApp/state/comments.ts","webpack://wagtail/./client/src/components/CommentApp/state/index.ts","webpack://wagtail/./client/src/components/CommentApp/state/settings.ts","webpack://wagtail/./client/src/components/CommentApp/state/utils.ts","webpack://wagtail/./client/src/components/CommentApp/utils/layout.ts","webpack://wagtail/./client/src/components/CommentApp/utils/maps.ts","webpack://wagtail/./client/src/components/CommentApp/utils/sequences.ts","webpack://wagtail/./client/src/entrypoints/admin/comments.js","webpack://wagtail/webpack/bootstrap","webpack://wagtail/webpack/runtime/compat get default export","webpack://wagtail/webpack/runtime/define property getters","webpack://wagtail/webpack/runtime/global","webpack://wagtail/webpack/runtime/harmony module decorator","webpack://wagtail/webpack/runtime/hasOwnProperty shorthand","webpack://wagtail/webpack/runtime/make namespace object","webpack://wagtail/webpack/runtime/runtimeId","webpack://wagtail/webpack/runtime/jsonp chunk loading","webpack://wagtail/webpack/startup"],"names":["deferred","global","token","timezone","timezoneClip","dateFormat","date","mask","utc","gmt","arguments","length","kindOf","test","undefined","Date","isNaN","TypeError","maskSlice","String","masks","slice","_","d","D","m","y","H","M","s","L","o","getTimezoneOffset","W","getWeek","N","getDayOfWeek","flags","dd","pad","ddd","i18n","dayNames","dddd","mm","mmm","monthNames","mmmm","yy","yyyy","h","hh","HH","MM","ss","l","Math","round","t","tt","T","TT","Z","match","pop","replace","floor","abs","S","val","len","targetThursday","getFullYear","getMonth","getDate","setDate","getDay","firstThursday","ds","setHours","getHours","weekDiff","dow","Array","isArray","toString","call","toLowerCase","n","r","e","Error","map","join","Q","Object","getPrototypeOf","hasOwnProperty","constructor","Function","v","i","keys","nn","forEach","u","has","prototype","a","get","f","set","delete","add","c","X","Map","q","Set","p","rn","writable","configurable","enumerable","value","create","clear","freeze","isFrozen","b","tn","U","j","g","O","w","P","x","A","I","k","R","concat","F","z","getOwnPropertyDescriptor","E","C","en","on","Proxy","revocable","revoke","proxy","J","push","K","from","this","defineProperty","min","entries","$","path","op","splice","unshift","JSON","stringify","setPrototypeOf","__proto__","size","values","V","next","done","G","Symbol","B","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","apply","un","produce","Promise","then","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","an","fn","cn","bind","sn","vn","pn","ln","dn","defaultEqualityCheck","areArgumentsShallowlyEqual","equalityCheck","prev","defaultMemoize","func","lastArgs","lastResult","getDependencies","funcs","dependencies","every","dep","dependencyTypes","createSelectorCreator","memoize","_len","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","memoizedResultFunc","selector","params","resetRecomputations","createSelector","createStructuredSelector","selectors","selectorCreator","objectKeys","key","_len3","_key3","reduce","composition","index","addComment","comment","type","exports","ADD_COMMENT","updateComment","commentId","update","UPDATE_COMMENT","deleteComment","DELETE_COMMENT","resolveComment","RESOLVE_COMMENT","setFocusedComment","_a","_b","updatePinnedComment","forceFocus","SET_FOCUSED_COMMENT","addReply","reply","ADD_REPLY","updateReply","replyId","UPDATE_REPLY","deleteReply","DELETE_REPLY","invalidateContentPath","contentPath","INVALIDATE_CONTENT_PATH","__esModule","commentActionFunctions","SET_PINNED_COMMENT","updateGlobalSettings","UPDATE_GLOBAL_SETTINGS","extendStatics","__extends","__","__awaiter","thisArg","_arguments","generator","resolve","reject","fulfilled","step","rejected","result","__generator","body","label","sent","trys","ops","verb","__values","__importDefault","mod","react_1","react_dom_1","focus_trap_react_1","Icon_1","comments_1","comments_2","sequences_1","CommentReply_1","CommentHeader_1","TextArea_1","saveComment","store","dispatch","localId","mode","text","newText","remoteId","author","err","console","error","doDeleteComment","doResolveComment","CommentComponent","_super","renderReplies","e_1","_this","_d","hideNewReply","_e","props","isFocused","user","strings","createElement","Fragment","replies","replyBeingEdited","_f","_g","deleted","e_1_1","newReplyHidden","replyForm","newReply","onSubmit","preventDefault","getNextReplyId","newCommentReply","now","className","placeholder","onChange","disabled","REPLY","onClick","stopPropagation","CANCEL","renderCreating","descriptionId","CommentHeader","commentReply","focused","focusTarget","additionalAttributes","COMMENT","renderEditing","SAVE","renderSaving","SAVING","renderSaveError","SAVE_ERROR","RETRY","renderDeleteConfirm","CONFIRM_DELETE_COMMENT","DELETE","renderDeleting","DELETING","renderDeleteError","DELETE_ERROR","renderDefault","onEdit","onDelete","id","notice","originalText","SAVE_PAGE_TO_SAVE_COMMENT_CHANGES","SAVE_PAGE_TO_ADD_COMMENT","onResolve","role","name","render","inner","top","layout","getCommentPosition","focusTrapOptions","preventScroll","clickOutsideDeactivates","onDeactivate","initialFocus","active","tabIndex","includes","style","position","display","isVisible","onDoubleClick","componentDidMount","element","findDOMNode","HTMLElement","setCommentElement","setCommentHeight","offsetHeight","componentWillUnmount","componentDidUpdate","Component","__assign","assign","__createBinding","k2","__setModuleDefault","__importStar","__rest","indexOf","propertyIsEnumerable","__read","ar","dateformat_1","wagtailConfig_1","Details","children","open","extraProps","IS_IE11","Summary","useState","menuOpen","setMenuOpen","useEffect","menuRef","useRef","menuContainerRef","toggleMenu","setTimeout","current","focus","handleClickOutside","target","Node","contains","document","addEventListener","removeEventListener","ref","MORE_ACTIONS","EDIT","RESOLVE","avatarUrl","src","saveCommentReply","deleteCommentReply","CommentReplyComponent","SAVE_PAGE_TO_SAVE_REPLY","CommentFormSetComponent","CommentFormComponent","CommentReplyFormSetComponent","CommentReplyFormComponent","PrefixedHiddenInput","prefix","fieldName","formNumber","fullPrefix","remoteReplyCount","commentForms","resolved","contentpath","comments","remoteCommentCount","TextArea","forwardRef","focusOnMount","_c","textAreaElement","useImperativeHandle","height","scrollHeight","rows","resize","overflowY","initCommentApp","CommentApp","defaultStrings","redux_1","layout_1","maps_1","state_1","settings_1","selectors_1","Comment_1","Form_1","settings_2","SHOW_COMMENTS","getAuthor","authors","authorData","getOrDefault","avatar_url","renderCommentsUi","state","getState","settings","commentsEnabled","currentTab","focusedComment","commentsToRender","commentsRendered","filter","getCommentVisible","utils","selectCommentsForContentPathFactory","selectCommentFactory","selectComments","selectEnabled","selectFocused","selectIsDirty","selectCommentCount","actions","createStore","reducer","INITIAL_STATE","LayoutController","setUser","userId","updateAnnotation","annotation","attachAnnotationLayout","setCommentAnnotation","setCurrentTab","tab","makeComment","getNextCommentId","newComment","setVisible","visible","renderApp","outputElement","initialComments","translationStrings","e_2","pinnedComment","initialFocusedCommentId","commentParams","URLSearchParams","window","location","search","parseInt","commentList","setPinnedComment","refreshDesiredPositions","refreshLayout","initialComments_1","initialComments_1_1","parse","created_at","pk","e_2_1","subscribe","closest","__spreadArray","to","il","selectRemoteCommentCount","reselect_1","some","utils_1","immer_1","enableES5","enableMapSet","draft","action","startsWith","combineReducers","base","updatePartial","commentElements","commentAnnotations","commentTabs","commentDesiredPositions","commentHeights","commentCalculatedPositions","isDirty","getTab","updateDesiredPosition","currentNodeTop","getAnchorNode","getBoundingClientRect","documentElement","scrollTop","oldDesiredPositions","getCommentTabVisible","allBlocks","containsPinnedComment","pinnedCommentPosition","blocksByTab","block","blocks","pinnedCommentTab","pinnedCommentOnThisTab","sort","comparisonBlock","currentBlocks","overlaps","newBlocks","previousBlock","currentBlocks_1","currentBlocks_1_1","TOP_MARGIN","currentPosition","defaultValue","nextCommentId","nextReplyId","main_1","commentApp","isCommentShortcut","ctrlKey","metaKey","altKey","keyCode","getContentPath","fieldNode","contentpaths","dataset","parentElement","reverse","BasicFieldLevelAnnotation","node","unsubscribe","subscribeToUpdates","selectComment","initialState","shown","onFocus","show","nowFocused","onUnfocus","hide","setOnClickHandler","remove","parentNode","removeChild","classList","ariaLabel","STRINGS","UNFOCUS_COMMENT","FOCUS_COMMENT","getAttribute","FieldLevelCommentWidget","commentAdditionNode","annotationTemplateNode","register","currentlyEnabled","selectCommentsForContentPath","currentComments","updateVisibility","unsubscribeWidget","newComments","newEnabled","commentsChanged","enabledChanged","getAnnotationForComment","newShown","annotationNode","cloneNode","insertAdjacentElement","initAddCommentButton","buttonElement","widget","querySelector","initCommentsInterface","formElement","commentsElement","getElementById","commentsOutputElement","dataElement","data","textContent","querySelectorAll","tabNavElement","detail","commentToggleWrapper","commentToggle","tabContentElement","commentNotificationsToggleButton","commentNotificationsDropdown","updateCommentVisibility","toggle","checked","commentCounter","updateCommentCount","commentCount","innerText","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","chunkIds","priority","notFulfilled","Infinity","getter","definition","globalThis","hmd","obj","prop","toStringTag","installedChunks","324","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","__webpack_exports__"],"mappings":"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","file":"wagtail/admin/static/wagtailadmin/js/comments.js","sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tresult = fn();\n\t\t}\n\t}\n\treturn result;\n};","/*\r\n * Date Format 1.2.3\r\n * (c) 2007-2009 Steven Levithan <stevenlevithan.com>\r\n * MIT license\r\n *\r\n * Includes enhancements by Scott Trenda <scott.trenda.net>\r\n * and Kris Kowal <cixar.com/~kris.kowal/>\r\n *\r\n * Accepts a date, a mask, or a date and a mask.\r\n * Returns a formatted version of the given date.\r\n * The date defaults to the current date/time.\r\n * The mask defaults to dateFormat.masks.default.\r\n */\r\n\r\n(function(global) {\r\n  'use strict';\r\n\r\n  var dateFormat = (function() {\r\n      var token = /d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\\1?|[LloSZWN]|'[^']*'|'[^']*'/g;\r\n      var timezone = /\\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\\d{4})?)\\b/g;\r\n      var timezoneClip = /[^-+\\dA-Z]/g;\r\n  \r\n      // Regexes and supporting functions are cached through closure\r\n      return function (date, mask, utc, gmt) {\r\n  \r\n        // You can't provide utc if you skip other args (use the 'UTC:' mask prefix)\r\n        if (arguments.length === 1 && kindOf(date) === 'string' && !/\\d/.test(date)) {\r\n          mask = date;\r\n          date = undefined;\r\n        }\r\n  \r\n        date = date || new Date;\r\n  \r\n        if(!(date instanceof Date)) {\r\n          date = new Date(date);\r\n        }\r\n  \r\n        if (isNaN(date)) {\r\n          throw TypeError('Invalid date');\r\n        }\r\n  \r\n        mask = String(dateFormat.masks[mask] || mask || dateFormat.masks['default']);\r\n  \r\n        // Allow setting the utc/gmt argument via the mask\r\n        var maskSlice = mask.slice(0, 4);\r\n        if (maskSlice === 'UTC:' || maskSlice === 'GMT:') {\r\n          mask = mask.slice(4);\r\n          utc = true;\r\n          if (maskSlice === 'GMT:') {\r\n            gmt = true;\r\n          }\r\n        }\r\n  \r\n        var _ = utc ? 'getUTC' : 'get';\r\n        var d = date[_ + 'Date']();\r\n        var D = date[_ + 'Day']();\r\n        var m = date[_ + 'Month']();\r\n        var y = date[_ + 'FullYear']();\r\n        var H = date[_ + 'Hours']();\r\n        var M = date[_ + 'Minutes']();\r\n        var s = date[_ + 'Seconds']();\r\n        var L = date[_ + 'Milliseconds']();\r\n        var o = utc ? 0 : date.getTimezoneOffset();\r\n        var W = getWeek(date);\r\n        var N = getDayOfWeek(date);\r\n        var flags = {\r\n          d:    d,\r\n          dd:   pad(d),\r\n          ddd:  dateFormat.i18n.dayNames[D],\r\n          dddd: dateFormat.i18n.dayNames[D + 7],\r\n          m:    m + 1,\r\n          mm:   pad(m + 1),\r\n          mmm:  dateFormat.i18n.monthNames[m],\r\n          mmmm: dateFormat.i18n.monthNames[m + 12],\r\n          yy:   String(y).slice(2),\r\n          yyyy: y,\r\n          h:    H % 12 || 12,\r\n          hh:   pad(H % 12 || 12),\r\n          H:    H,\r\n          HH:   pad(H),\r\n          M:    M,\r\n          MM:   pad(M),\r\n          s:    s,\r\n          ss:   pad(s),\r\n          l:    pad(L, 3),\r\n          L:    pad(Math.round(L / 10)),\r\n          t:    H < 12 ? 'a'  : 'p',\r\n          tt:   H < 12 ? 'am' : 'pm',\r\n          T:    H < 12 ? 'A'  : 'P',\r\n          TT:   H < 12 ? 'AM' : 'PM',\r\n          Z:    gmt ? 'GMT' : utc ? 'UTC' : (String(date).match(timezone) || ['']).pop().replace(timezoneClip, ''),\r\n          o:    (o > 0 ? '-' : '+') + pad(Math.floor(Math.abs(o) / 60) * 100 + Math.abs(o) % 60, 4),\r\n          S:    ['th', 'st', 'nd', 'rd'][d % 10 > 3 ? 0 : (d % 100 - d % 10 != 10) * d % 10],\r\n          W:    W,\r\n          N:    N\r\n        };\r\n  \r\n        return mask.replace(token, function (match) {\r\n          if (match in flags) {\r\n            return flags[match];\r\n          }\r\n          return match.slice(1, match.length - 1);\r\n        });\r\n      };\r\n    })();\r\n\r\n  dateFormat.masks = {\r\n    'default':               'ddd mmm dd yyyy HH:MM:ss',\r\n    'shortDate':             'm/d/yy',\r\n    'mediumDate':            'mmm d, yyyy',\r\n    'longDate':              'mmmm d, yyyy',\r\n    'fullDate':              'dddd, mmmm d, yyyy',\r\n    'shortTime':             'h:MM TT',\r\n    'mediumTime':            'h:MM:ss TT',\r\n    'longTime':              'h:MM:ss TT Z',\r\n    'isoDate':               'yyyy-mm-dd',\r\n    'isoTime':               'HH:MM:ss',\r\n    'isoDateTime':           'yyyy-mm-dd\\'T\\'HH:MM:sso',\r\n    'isoUtcDateTime':        'UTC:yyyy-mm-dd\\'T\\'HH:MM:ss\\'Z\\'',\r\n    'expiresHeaderFormat':   'ddd, dd mmm yyyy HH:MM:ss Z'\r\n  };\r\n\r\n  // Internationalization strings\r\n  dateFormat.i18n = {\r\n    dayNames: [\r\n      'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat',\r\n      'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'\r\n    ],\r\n    monthNames: [\r\n      'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec',\r\n      'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'\r\n    ]\r\n  };\r\n\r\nfunction pad(val, len) {\r\n  val = String(val);\r\n  len = len || 2;\r\n  while (val.length < len) {\r\n    val = '0' + val;\r\n  }\r\n  return val;\r\n}\r\n\r\n/**\r\n * Get the ISO 8601 week number\r\n * Based on comments from\r\n * http://techblog.procurios.nl/k/n618/news/view/33796/14863/Calculate-ISO-8601-week-and-year-in-javascript.html\r\n *\r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getWeek(date) {\r\n  // Remove time components of date\r\n  var targetThursday = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n\r\n  // Change date to Thursday same week\r\n  targetThursday.setDate(targetThursday.getDate() - ((targetThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Take January 4th as it is always in week 1 (see ISO 8601)\r\n  var firstThursday = new Date(targetThursday.getFullYear(), 0, 4);\r\n\r\n  // Change date to Thursday same week\r\n  firstThursday.setDate(firstThursday.getDate() - ((firstThursday.getDay() + 6) % 7) + 3);\r\n\r\n  // Check if daylight-saving-time-switch occurred and correct for it\r\n  var ds = targetThursday.getTimezoneOffset() - firstThursday.getTimezoneOffset();\r\n  targetThursday.setHours(targetThursday.getHours() - ds);\r\n\r\n  // Number of weeks between target Thursday and first Thursday\r\n  var weekDiff = (targetThursday - firstThursday) / (86400000*7);\r\n  return 1 + Math.floor(weekDiff);\r\n}\r\n\r\n/**\r\n * Get ISO-8601 numeric representation of the day of the week\r\n * 1 (for Monday) through 7 (for Sunday)\r\n * \r\n * @param  {Object} `date`\r\n * @return {Number}\r\n */\r\nfunction getDayOfWeek(date) {\r\n  var dow = date.getDay();\r\n  if(dow === 0) {\r\n    dow = 7;\r\n  }\r\n  return dow;\r\n}\r\n\r\n/**\r\n * kind-of shortcut\r\n * @param  {*} val\r\n * @return {String}\r\n */\r\nfunction kindOf(val) {\r\n  if (val === null) {\r\n    return 'null';\r\n  }\r\n\r\n  if (val === undefined) {\r\n    return 'undefined';\r\n  }\r\n\r\n  if (typeof val !== 'object') {\r\n    return typeof val;\r\n  }\r\n\r\n  if (Array.isArray(val)) {\r\n    return 'array';\r\n  }\r\n\r\n  return {}.toString.call(val)\r\n    .slice(8, -1).toLowerCase();\r\n};\r\n\r\n\r\n\r\n  if (typeof define === 'function' && define.amd) {\r\n    define(function () {\r\n      return dateFormat;\r\n    });\r\n  } else if (typeof exports === 'object') {\r\n    module.exports = dateFormat;\r\n  } else {\r\n    global.dateFormat = dateFormat;\r\n  }\r\n})(this);\r\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function g(n){O(n),n.p.forEach(S),n.p=null}function O(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.g=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.O||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(g(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q],r,e.u,e.s)):r=M(e,i,[]),g(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.O?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);return!(!t||t.get)}function f(r){r.g&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r}),e.push({op:\"replace\",path:[],value:n.t})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.g&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,g:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.D.set(n,!1),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,g:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),en.deleteProperty.call(this,r[0],t)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.O=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?g(c):O(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw g(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if((f=i(r))===H)return;return void 0===f&&(f=r),e.F&&d(f,!0),f}n(21,r)},this.produceWithPatches=function(n,r){return\"function\"==typeof n?function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))}:[e.produce(n,r,(function(n,r){t=n,i=r})),t,i];var t,i},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,O(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.O=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t.slice(e+1))}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","\"use strict\";\nexports.__esModule = true;\nexports.commentActionFunctions = exports.invalidateContentPath = exports.deleteReply = exports.updateReply = exports.addReply = exports.setFocusedComment = exports.resolveComment = exports.deleteComment = exports.updateComment = exports.addComment = exports.INVALIDATE_CONTENT_PATH = exports.DELETE_REPLY = exports.UPDATE_REPLY = exports.ADD_REPLY = exports.SET_PINNED_COMMENT = exports.SET_FOCUSED_COMMENT = exports.RESOLVE_COMMENT = exports.DELETE_COMMENT = exports.UPDATE_COMMENT = exports.ADD_COMMENT = void 0;\nexports.ADD_COMMENT = 'add-comment';\nexports.UPDATE_COMMENT = 'update-comment';\nexports.DELETE_COMMENT = 'delete-comment';\nexports.RESOLVE_COMMENT = 'resolve-comment';\nexports.SET_FOCUSED_COMMENT = 'set-focused-comment';\nexports.SET_PINNED_COMMENT = 'set-pinned-comment';\nexports.ADD_REPLY = 'add-reply';\nexports.UPDATE_REPLY = 'update-reply';\nexports.DELETE_REPLY = 'delete-reply';\nexports.INVALIDATE_CONTENT_PATH = 'invalidate-content-path';\nfunction addComment(comment) {\n    return {\n        type: exports.ADD_COMMENT,\n        comment: comment,\n    };\n}\nexports.addComment = addComment;\nfunction updateComment(commentId, update) {\n    return {\n        type: exports.UPDATE_COMMENT,\n        commentId: commentId,\n        update: update,\n    };\n}\nexports.updateComment = updateComment;\nfunction deleteComment(commentId) {\n    return {\n        type: exports.DELETE_COMMENT,\n        commentId: commentId,\n    };\n}\nexports.deleteComment = deleteComment;\nfunction resolveComment(commentId) {\n    return {\n        type: exports.RESOLVE_COMMENT,\n        commentId: commentId,\n    };\n}\nexports.resolveComment = resolveComment;\nfunction setFocusedComment(commentId, _a) {\n    var _b = _a === void 0 ? { updatePinnedComment: false, forceFocus: false } : _a, updatePinnedComment = _b.updatePinnedComment, forceFocus = _b.forceFocus;\n    return {\n        type: exports.SET_FOCUSED_COMMENT,\n        commentId: commentId,\n        updatePinnedComment: updatePinnedComment,\n        forceFocus: forceFocus\n    };\n}\nexports.setFocusedComment = setFocusedComment;\nfunction addReply(commentId, reply) {\n    return {\n        type: exports.ADD_REPLY,\n        commentId: commentId,\n        reply: reply,\n    };\n}\nexports.addReply = addReply;\nfunction updateReply(commentId, replyId, update) {\n    return {\n        type: exports.UPDATE_REPLY,\n        commentId: commentId,\n        replyId: replyId,\n        update: update,\n    };\n}\nexports.updateReply = updateReply;\nfunction deleteReply(commentId, replyId) {\n    return {\n        type: exports.DELETE_REPLY,\n        commentId: commentId,\n        replyId: replyId,\n    };\n}\nexports.deleteReply = deleteReply;\nfunction invalidateContentPath(contentPath) {\n    return {\n        type: exports.INVALIDATE_CONTENT_PATH,\n        contentPath: contentPath,\n    };\n}\nexports.invalidateContentPath = invalidateContentPath;\nexports.commentActionFunctions = {\n    addComment: addComment,\n    updateComment: updateComment,\n    deleteComment: deleteComment,\n    resolveComment: resolveComment,\n    setFocusedComment: setFocusedComment,\n    addReply: addReply,\n    updateReply: updateReply,\n    deleteReply: deleteReply,\n    invalidateContentPath: invalidateContentPath,\n};\n","\"use strict\";\nexports.__esModule = true;\nexports.updateGlobalSettings = exports.UPDATE_GLOBAL_SETTINGS = void 0;\nexports.UPDATE_GLOBAL_SETTINGS = 'update-global-settings';\nfunction updateGlobalSettings(update) {\n    return {\n        type: exports.UPDATE_GLOBAL_SETTINGS,\n        update: update,\n    };\n}\nexports.updateGlobalSettings = updateGlobalSettings;\n","\"use strict\";\n/* eslint-disable react/prop-types */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar react_1 = __importDefault(require(\"react\"));\nvar react_dom_1 = __importDefault(require(\"react-dom\"));\nvar focus_trap_react_1 = __importDefault(require(\"focus-trap-react\"));\nvar Icon_1 = __importDefault(require(\"../../../Icon/Icon\"));\nvar comments_1 = require(\"../../state/comments\");\nvar comments_2 = require(\"../../actions/comments\");\nvar sequences_1 = require(\"../../utils/sequences\");\nvar CommentReply_1 = __importDefault(require(\"../CommentReply\"));\nvar CommentHeader_1 = require(\"../CommentHeader\");\nvar TextArea_1 = __importDefault(require(\"../TextArea\"));\nfunction saveComment(comment, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                mode: 'saving',\n            }));\n            try {\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'default',\n                    text: comment.newText,\n                    remoteId: comment.remoteId,\n                    author: comment.author,\n                    date: comment.date,\n                }));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'save_error',\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction doDeleteComment(comment, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                mode: 'deleting',\n            }));\n            try {\n                store.dispatch(comments_2.deleteComment(comment.localId));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'delete_error',\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction doResolveComment(comment, store) {\n    store.dispatch(comments_2.resolveComment(comment.localId));\n}\nvar CommentComponent = /** @class */ (function (_super) {\n    __extends(CommentComponent, _super);\n    function CommentComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommentComponent.prototype.renderReplies = function (_a) {\n        var e_1, _b;\n        var _this = this;\n        var _c = _a === void 0 ? {} : _a, _d = _c.hideNewReply, hideNewReply = _d === void 0 ? false : _d;\n        var _e = this.props, comment = _e.comment, isFocused = _e.isFocused, store = _e.store, user = _e.user, strings = _e.strings;\n        if (!comment.remoteId) {\n            // Hide replies UI if the comment itself isn't saved yet\n            return react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null);\n        }\n        var onChangeNewReply = function (value) {\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                newReply: value,\n            }));\n        };\n        var sendReply = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var replyId, reply;\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                replyId = sequences_1.getNextReplyId();\n                reply = comments_1.newCommentReply(replyId, user, Date.now(), {\n                    text: comment.newReply,\n                    mode: 'default',\n                });\n                store.dispatch(comments_2.addReply(comment.localId, reply));\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    newReply: '',\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        var onClickCancelReply = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                newReply: '',\n            }));\n            store.dispatch(comments_2.setFocusedComment(null));\n            // Stop the event bubbling so that the comment isn't immediately refocused\n            e.stopPropagation();\n        };\n        var replies = [];\n        var replyBeingEdited = false;\n        try {\n            for (var _f = __values(comment.replies.values()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var reply = _g.value;\n                if (reply.mode === 'saving' || reply.mode === 'editing') {\n                    replyBeingEdited = true;\n                }\n                if (!reply.deleted) {\n                    replies.push(react_1[\"default\"].createElement(CommentReply_1[\"default\"], { key: reply.localId, store: store, user: user, comment: comment, reply: reply, strings: strings, isFocused: isFocused }));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_g && !_g.done && (_b = _f[\"return\"])) _b.call(_f);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Hide new reply if a reply is being edited as well\n        var newReplyHidden = hideNewReply || replyBeingEdited;\n        var replyForm = react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null);\n        if (!newReplyHidden && (isFocused || comment.newReply)) {\n            replyForm = (react_1[\"default\"].createElement(\"form\", { onSubmit: sendReply },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment__reply-input\", placeholder: \"Enter your reply...\", value: comment.newReply, onChange: onChangeNewReply }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__reply-actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newReply.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.REPLY),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onClickCancelReply, className: \"comment__button\" }, strings.CANCEL))));\n        }\n        else if (replies.length === 0) {\n            // If there is no form, or replies, don't add any elements to the dom\n            // This is in case there is a warning after the comment, some special styling\n            // is added if that element is that last child so we can't have any hidden elements here.\n            return react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null);\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(\"ul\", { className: \"comment__replies\" }, replies),\n            replyForm));\n    };\n    CommentComponent.prototype.renderCreating = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                newText: value,\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_2.deleteComment(comment.localId));\n        };\n        var descriptionId = \"comment-description-\" + comment.localId;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, onChange: onChangeText, placeholder: \"Enter your comments...\", additionalAttributes: {\n                        'aria-describedby': descriptionId\n                    } }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.COMMENT),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, strings.CANCEL)))));\n    };\n    CommentComponent.prototype.renderEditing = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                newText: value,\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                mode: 'default',\n                newText: comment.text,\n            }));\n        };\n        var descriptionId = \"comment-description-\" + comment.localId;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, additionalAttributes: {\n                        'aria-describedby': descriptionId\n                    }, onChange: onChangeText }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, strings.SAVE),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, strings.CANCEL))),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderSaving = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, strings.SAVING),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderSaveError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            this.renderReplies({ hideNewReply: true }),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\n                strings.SAVE_ERROR,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, strings.RETRY))));\n    };\n    CommentComponent.prototype.renderDeleteConfirm = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_2.updateComment(comment.localId, {\n                mode: 'default',\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__confirm-delete\" },\n                strings.CONFIRM_DELETE_COMMENT,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, strings.CANCEL),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button comment__button--primary\", onClick: onClickDelete }, strings.DELETE)),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderDeleting = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, strings.DELETING),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderDeleteError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'default',\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            this.renderReplies({ hideNewReply: true }),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\n                strings.DELETE_ERROR,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, strings.CANCEL),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, strings.RETRY))));\n    };\n    CommentComponent.prototype.renderDefault = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        // Show edit/delete buttons if this comment was authored by the current user\n        var onEdit;\n        var onDelete;\n        if (comment.author === null || this.props.user && this.props.user.id === comment.author.id) {\n            onEdit = function () {\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'editing',\n                    newText: comment.text,\n                }));\n            };\n            onDelete = function () {\n                store.dispatch(comments_2.updateComment(comment.localId, {\n                    mode: 'delete_confirm',\n                }));\n            };\n        }\n        var notice = '';\n        if (!comment.remoteId) {\n            // Save the page to add this comment\n            notice = strings.SAVE_PAGE_TO_ADD_COMMENT;\n        }\n        else if (comment.text !== comment.originalText) {\n            // Save the page to save this comment\n            notice = strings.SAVE_PAGE_TO_SAVE_COMMENT_CHANGES;\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, strings: strings, onResolve: doResolveComment, onEdit: onEdit, onDelete: onDelete, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            notice &&\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__notice-placeholder\" },\n                    react_1[\"default\"].createElement(\"div\", { className: \"comment__notice\", role: \"status\" },\n                        react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"info-circle\" }),\n                        notice)),\n            this.renderReplies()));\n    };\n    CommentComponent.prototype.render = function () {\n        var _this = this;\n        var inner;\n        switch (this.props.comment.mode) {\n            case 'creating':\n                inner = this.renderCreating();\n                break;\n            case 'editing':\n                inner = this.renderEditing();\n                break;\n            case 'saving':\n                inner = this.renderSaving();\n                break;\n            case 'save_error':\n                inner = this.renderSaveError();\n                break;\n            case 'delete_confirm':\n                inner = this.renderDeleteConfirm();\n                break;\n            case 'deleting':\n                inner = this.renderDeleting();\n                break;\n            case 'delete_error':\n                inner = this.renderDeleteError();\n                break;\n            default:\n                inner = this.renderDefault();\n                break;\n        }\n        var onClick = function () {\n            _this.props.store.dispatch(comments_2.setFocusedComment(_this.props.comment.localId, { updatePinnedComment: false, forceFocus: _this.props.isFocused && _this.props.forceFocus }));\n        };\n        var onDoubleClick = function () {\n            _this.props.store.dispatch(comments_2.setFocusedComment(_this.props.comment.localId, { updatePinnedComment: true, forceFocus: true }));\n        };\n        var top = this.props.layout.getCommentPosition(this.props.comment.localId);\n        return (react_1[\"default\"].createElement(focus_trap_react_1[\"default\"], { focusTrapOptions: {\n                preventScroll: true,\n                clickOutsideDeactivates: true,\n                onDeactivate: function () {\n                    _this.props.store.dispatch(comments_2.setFocusedComment(null, { updatePinnedComment: true, forceFocus: false }));\n                },\n                initialFocus: '[data-focus-target=\"true\"]',\n            }, active: this.props.isFocused && this.props.forceFocus },\n            react_1[\"default\"].createElement(\"li\", { tabIndex: -1, \"data-focus-target\": this.props.isFocused && !['creating', 'editing'].includes(this.props.comment.mode), key: this.props.comment.localId, className: \"comment comment--mode-\" + this.props.comment.mode + \" \" + (this.props.isFocused ? 'comment--focused' : ''), style: {\n                    position: 'absolute',\n                    top: top + \"px\",\n                    display: this.props.isVisible ? 'block' : 'none',\n                }, \"data-comment-id\": this.props.comment.localId, onClick: onClick, onDoubleClick: onDoubleClick }, inner)));\n    };\n    CommentComponent.prototype.componentDidMount = function () {\n        var element = react_dom_1[\"default\"].findDOMNode(this);\n        if (element instanceof HTMLElement) {\n            this.props.layout.setCommentElement(this.props.comment.localId, element);\n            if (this.props.isVisible) {\n                this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\n            }\n        }\n    };\n    CommentComponent.prototype.componentWillUnmount = function () {\n        this.props.layout.setCommentElement(this.props.comment.localId, null);\n    };\n    CommentComponent.prototype.componentDidUpdate = function () {\n        var element = react_dom_1[\"default\"].findDOMNode(this);\n        // Keep height up to date so that other comments will be moved out of the way\n        if (this.props.isVisible && element instanceof HTMLElement) {\n            this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\n        }\n    };\n    return CommentComponent;\n}(react_1[\"default\"].Component));\nexports[\"default\"] = CommentComponent;\n","\"use strict\";\n/* eslint-disable react/prop-types */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.CommentHeader = void 0;\nvar dateformat_1 = __importDefault(require(\"dateformat\"));\nvar react_1 = __importStar(require(\"react\"));\nvar Icon_1 = __importDefault(require(\"../../../Icon/Icon\"));\nvar wagtailConfig_1 = require(\"../../../../config/wagtailConfig\");\n// Details/Summary components that just become <details>/<summary> tags\n// except for IE11 where they become <div> tags to allow us to style them\nvar Details = (function (_a) {\n    var children = _a.children, open = _a.open, extraProps = __rest(_a, [\"children\", \"open\"]);\n    if (wagtailConfig_1.IS_IE11) {\n        return (react_1[\"default\"].createElement(\"div\", __assign({ className: 'details-fallback' + (open ? ' details-fallback--open' : '') }, extraProps), children));\n    }\n    return (react_1[\"default\"].createElement(\"details\", __assign({ open: open }, extraProps), children));\n});\nvar Summary = function (_a) {\n    var children = _a.children, extraProps = __rest(_a, [\"children\"]);\n    if (wagtailConfig_1.IS_IE11) {\n        return (react_1[\"default\"].createElement(\"button\", __assign({ className: \"details-fallback__summary\" }, extraProps), children));\n    }\n    return (react_1[\"default\"].createElement(\"summary\", __assign({}, extraProps), children));\n};\nvar CommentHeader = function (_a) {\n    var commentReply = _a.commentReply, store = _a.store, strings = _a.strings, onResolve = _a.onResolve, onEdit = _a.onEdit, onDelete = _a.onDelete, descriptionId = _a.descriptionId, focused = _a.focused;\n    var author = commentReply.author, date = commentReply.date;\n    var onClickResolve = function (e) {\n        e.preventDefault();\n        if (onResolve) {\n            onResolve(commentReply, store);\n        }\n    };\n    var onClickEdit = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            e.preventDefault();\n            if (onEdit) {\n                onEdit(commentReply, store);\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var onClickDelete = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            e.preventDefault();\n            if (onDelete) {\n                onDelete(commentReply, store);\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var _b = __read(react_1.useState(false), 2), menuOpen = _b[0], setMenuOpen = _b[1];\n    react_1.useEffect(function () {\n        if (menuOpen && !focused) {\n            setMenuOpen(false);\n        }\n    }, [focused]);\n    var menuRef = react_1.useRef(null);\n    var menuContainerRef = react_1.useRef(null);\n    var toggleMenu = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        setMenuOpen(!menuOpen);\n    };\n    react_1.useEffect(function () {\n        if (menuOpen) {\n            setTimeout(function () { var _a; return (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.focus(); }, 1);\n        }\n    }, [menuOpen]);\n    var handleClickOutside = function (e) {\n        if (menuContainerRef.current && e.target instanceof Node && !menuContainerRef.current.contains(e.target)) {\n            setMenuOpen(false);\n        }\n    };\n    react_1.useEffect(function () {\n        document.addEventListener('click', handleClickOutside, true);\n        return function () {\n            document.removeEventListener('click', handleClickOutside, true);\n        };\n    }, []);\n    return (react_1[\"default\"].createElement(\"div\", { className: \"comment-header\" },\n        react_1[\"default\"].createElement(\"div\", { className: \"comment-header__actions\" }, (onEdit || onDelete || onResolve) &&\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-header__action comment-header__action--more\", ref: menuContainerRef },\n                react_1[\"default\"].createElement(Details, { open: menuOpen, onClick: toggleMenu },\n                    react_1[\"default\"].createElement(Summary, { \"aria-label\": strings.MORE_ACTIONS, \"aria-haspopup\": \"menu\", role: \"button\", onClick: toggleMenu, \"aria-expanded\": menuOpen },\n                        react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"ellipsis-v\" })),\n                    react_1[\"default\"].createElement(\"div\", { className: \"comment-header__more-actions\", role: \"menu\", ref: menuRef },\n                        onEdit && react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickEdit }, strings.EDIT),\n                        onDelete && react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickDelete }, strings.DELETE),\n                        onResolve && react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickResolve }, strings.RESOLVE))))),\n        author && author.avatarUrl &&\n            react_1[\"default\"].createElement(\"img\", { className: \"comment-header__avatar\", src: author.avatarUrl, role: \"presentation\" }),\n        react_1[\"default\"].createElement(\"span\", { id: descriptionId },\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__author\" }, author ? author.name : ''),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__date\" }, dateformat_1[\"default\"](date, 'd mmm yyyy HH:MM')))));\n};\nexports.CommentHeader = CommentHeader;\n","\"use strict\";\n/* eslint-disable react/prop-types */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.saveCommentReply = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar comments_1 = require(\"../../actions/comments\");\nvar CommentHeader_1 = require(\"../CommentHeader\");\nvar TextArea_1 = __importDefault(require(\"../TextArea\"));\nvar Icon_1 = __importDefault(require(\"../../../Icon/Icon\"));\nfunction saveCommentReply(comment, reply, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                mode: 'saving',\n            }));\n            try {\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'default',\n                    text: reply.newText,\n                    author: reply.author,\n                }));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'save_error',\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nexports.saveCommentReply = saveCommentReply;\nfunction deleteCommentReply(comment, reply, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                mode: 'deleting',\n            }));\n            try {\n                store.dispatch(comments_1.deleteReply(comment.localId, reply.localId));\n            }\n            catch (err) {\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'delete_error',\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nvar CommentReplyComponent = /** @class */ (function (_super) {\n    __extends(CommentReplyComponent, _super);\n    function CommentReplyComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommentReplyComponent.prototype.renderEditing = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                newText: value,\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                mode: 'default',\n                newText: reply.text,\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment-reply__input\", value: reply.newText, onChange: onChangeText }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { type: \"submit\", disabled: reply.newText.length === 0, className: \"comment-reply__button comment-reply__button--primary\" }, strings.SAVE),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onCancel }, strings.CANCEL)))));\n    };\n    CommentReplyComponent.prototype.renderSaving = function () {\n        var _a = this.props, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, strings.SAVING)));\n    };\n    CommentReplyComponent.prototype.renderSaveError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\n                strings.SAVE_ERROR,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, strings.RETRY))));\n    };\n    CommentReplyComponent.prototype.renderDeleteConfirm = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) {\n            e.preventDefault();\n            store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                mode: 'default',\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__confirm-delete\" },\n                strings.CONFIRM_DELETE_COMMENT,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, strings.CANCEL),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button comment-reply__button--primary\", onClick: onClickDelete }, strings.DELETE))));\n    };\n    CommentReplyComponent.prototype.renderDeleting = function () {\n        var _a = this.props, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, strings.DELETING)));\n    };\n    CommentReplyComponent.prototype.renderDeleteError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'default',\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\n                strings.DELETE_ERROR,\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, strings.CANCEL),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, strings.RETRY))));\n    };\n    CommentReplyComponent.prototype.renderDefault = function () {\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, strings = _a.strings, isFocused = _a.isFocused;\n        // Show edit/delete buttons if this reply was authored by the current user\n        var onEdit;\n        var onDelete;\n        if (reply.author === null || this.props.user && this.props.user.id === reply.author.id) {\n            onEdit = function () {\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'editing',\n                    newText: reply.text,\n                }));\n            };\n            onDelete = function () {\n                store.dispatch(comments_1.updateReply(comment.localId, reply.localId, {\n                    mode: 'delete_confirm',\n                }));\n            };\n        }\n        var notice = '';\n        if (!reply.remoteId || reply.text !== reply.originalText) {\n            // Save the page to save this reply\n            notice = strings.SAVE_PAGE_TO_SAVE_REPLY;\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, strings: strings, onEdit: onEdit, onDelete: onDelete, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            notice &&\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__notice-placeholder\" },\n                    react_1[\"default\"].createElement(\"div\", { className: \"comment__notice\", role: \"status\" },\n                        react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"info-circle\" }),\n                        notice))));\n    };\n    CommentReplyComponent.prototype.render = function () {\n        var inner;\n        switch (this.props.reply.mode) {\n            case 'editing':\n                inner = this.renderEditing();\n                break;\n            case 'saving':\n                inner = this.renderSaving();\n                break;\n            case 'save_error':\n                inner = this.renderSaveError();\n                break;\n            case 'delete_confirm':\n                inner = this.renderDeleteConfirm();\n                break;\n            case 'deleting':\n                inner = this.renderDeleting();\n                break;\n            case 'delete_error':\n                inner = this.renderDeleteError();\n                break;\n            default:\n                inner = this.renderDefault();\n                break;\n        }\n        return (react_1[\"default\"].createElement(\"li\", { key: this.props.reply.localId, className: \"comment-reply comment-reply--mode-\" + this.props.reply.mode, \"data-reply-id\": this.props.reply.localId }, inner));\n    };\n    return CommentReplyComponent;\n}(react_1[\"default\"].Component));\nexports[\"default\"] = CommentReplyComponent;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.CommentFormSetComponent = exports.CommentFormComponent = exports.CommentReplyFormSetComponent = exports.CommentReplyFormComponent = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nfunction PrefixedHiddenInput(_a) {\n    var prefix = _a.prefix, value = _a.value, fieldName = _a.fieldName;\n    return (react_1[\"default\"].createElement(\"input\", { type: \"hidden\", name: prefix + \"-\" + fieldName, value: value === null ? '' : value, id: \"id_\" + prefix + \"-\" + fieldName }));\n}\nfunction CommentReplyFormComponent(_a) {\n    var reply = _a.reply, formNumber = _a.formNumber, prefix = _a.prefix;\n    var fullPrefix = prefix + \"-\" + formNumber;\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: reply.deleted ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: reply.remoteId, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: reply.text, prefix: fullPrefix })));\n}\nexports.CommentReplyFormComponent = CommentReplyFormComponent;\nfunction CommentReplyFormSetComponent(_a) {\n    var replies = _a.replies, prefix = _a.prefix, remoteReplyCount = _a.remoteReplyCount;\n    var fullPrefix = prefix + \"-replies\";\n    var commentForms = replies.map(function (reply, formNumber) { return (react_1[\"default\"].createElement(CommentReplyFormComponent, { key: reply.localId, formNumber: formNumber, reply: reply, prefix: fullPrefix })); });\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: replies.length, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteReplyCount, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: fullPrefix }),\n        commentForms));\n}\nexports.CommentReplyFormSetComponent = CommentReplyFormSetComponent;\nfunction CommentFormComponent(_a) {\n    var comment = _a.comment, formNumber = _a.formNumber, prefix = _a.prefix;\n    var fullPrefix = prefix + \"-\" + formNumber;\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: comment.deleted ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"resolved\", value: comment.resolved ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: comment.remoteId, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"contentpath\", value: comment.contentpath, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: comment.text, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"position\", value: comment.position, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(CommentReplyFormSetComponent, { replies: Array.from(comment.replies.values()), prefix: fullPrefix, remoteReplyCount: comment.remoteReplyCount })));\n}\nexports.CommentFormComponent = CommentFormComponent;\nfunction CommentFormSetComponent(_a) {\n    var comments = _a.comments, remoteCommentCount = _a.remoteCommentCount;\n    var prefix = 'comments';\n    var commentForms = comments.map(function (comment, formNumber) { return (react_1[\"default\"].createElement(CommentFormComponent, { key: comment.localId, comment: comment, formNumber: formNumber, prefix: prefix })); });\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: comments.length, prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteCommentCount, prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: prefix }),\n        commentForms));\n}\nexports.CommentFormSetComponent = CommentFormSetComponent;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar react_1 = __importDefault(require(\"react\"));\nvar TextArea = react_1[\"default\"].forwardRef(function (_a, ref) {\n    var value = _a.value, className = _a.className, placeholder = _a.placeholder, onChange = _a.onChange, focusOnMount = _a.focusOnMount, _b = _a.focusTarget, focusTarget = _b === void 0 ? false : _b, _c = _a.additionalAttributes, additionalAttributes = _c === void 0 ? {} : _c;\n    var onChangeValue = function (e) {\n        if (onChange) {\n            onChange(e.target.value);\n        }\n    };\n    // Resize the textarea whenever the value is changed\n    var textAreaElement = react_1[\"default\"].useRef(null);\n    react_1[\"default\"].useImperativeHandle(ref, function () { return textAreaElement.current; });\n    react_1[\"default\"].useEffect(function () {\n        if (textAreaElement.current) {\n            textAreaElement.current.style.height = '';\n            textAreaElement.current.style.height =\n                textAreaElement.current.scrollHeight + 'px';\n        }\n    }, [value, textAreaElement]);\n    // Focus the textarea when it is mounted\n    react_1[\"default\"].useEffect(function () {\n        if (focusOnMount && textAreaElement.current) {\n            textAreaElement.current.focus();\n        }\n    }, [textAreaElement]);\n    return (react_1[\"default\"].createElement(\"textarea\", __assign({ \"data-focus-target\": focusTarget, rows: 1, style: { resize: 'none', overflowY: 'hidden' }, className: className, placeholder: placeholder, ref: textAreaElement, onChange: onChangeValue, value: value }, additionalAttributes)));\n});\nexports[\"default\"] = TextArea;\n","\"use strict\";\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.initCommentApp = exports.CommentApp = exports.defaultStrings = void 0;\nvar react_1 = __importDefault(require(\"react\"));\nvar react_dom_1 = __importDefault(require(\"react-dom\"));\nvar redux_1 = require(\"redux\");\nvar layout_1 = require(\"./utils/layout\");\nvar maps_1 = require(\"./utils/maps\");\nvar sequences_1 = require(\"./utils/sequences\");\nvar state_1 = require(\"./state\");\nvar comments_1 = require(\"./state/comments\");\nvar comments_2 = require(\"./actions/comments\");\nvar settings_1 = require(\"./actions/settings\");\nvar selectors_1 = require(\"./selectors\");\nvar Comment_1 = __importDefault(require(\"./components/Comment\"));\nvar Form_1 = require(\"./components/Form\");\nvar settings_2 = require(\"./state/settings\");\nexports.defaultStrings = {\n    COMMENT: 'Comment',\n    SAVE: 'Save',\n    SAVING: 'Saving...',\n    CANCEL: 'Cancel',\n    DELETE: 'Delete',\n    DELETING: 'Deleting...',\n    SHOW_COMMENTS: 'Show comments',\n    EDIT: 'Edit',\n    REPLY: 'Reply',\n    RESOLVE: 'Resolve',\n    RETRY: 'Retry',\n    DELETE_ERROR: 'Delete error',\n    CONFIRM_DELETE_COMMENT: 'Are you sure?',\n    SAVE_ERROR: 'Save error',\n    MORE_ACTIONS: 'More actions',\n    SAVE_PAGE_TO_ADD_COMMENT: 'Save the page to add this comment',\n    SAVE_PAGE_TO_SAVE_COMMENT_CHANGES: 'Save the page to save this comment',\n    SAVE_PAGE_TO_SAVE_REPLY: 'Save the page to save this reply',\n};\n/* eslint-enable */\n// eslint-disable-next-line camelcase\nvar getAuthor = function (authors, id) {\n    var authorData = maps_1.getOrDefault(authors, String(id), { name: '', avatar_url: '' });\n    return {\n        id: id,\n        name: authorData.name,\n        avatarUrl: authorData.avatar_url,\n    };\n};\nfunction renderCommentsUi(store, layout, comments, strings) {\n    var state = store.getState();\n    var _a = state.settings, commentsEnabled = _a.commentsEnabled, user = _a.user, currentTab = _a.currentTab;\n    var _b = state.comments, focusedComment = _b.focusedComment, forceFocus = _b.forceFocus;\n    var commentsToRender = comments;\n    if (!commentsEnabled || !user) {\n        commentsToRender = [];\n    }\n    // Hide all resolved/deleted comments\n    commentsToRender = commentsToRender.filter(function (_a) {\n        var deleted = _a.deleted, resolved = _a.resolved;\n        return !(deleted || resolved);\n    });\n    var commentsRendered = commentsToRender.map(function (comment) { return (react_1[\"default\"].createElement(Comment_1[\"default\"], { key: comment.localId, store: store, layout: layout, user: user, comment: comment, isFocused: comment.localId === focusedComment, forceFocus: forceFocus, isVisible: layout.getCommentVisible(currentTab, comment.localId), strings: strings })); });\n    return (react_1[\"default\"].createElement(\"ol\", { className: \"comments-list\" }, commentsRendered));\n    /* eslint-enable react/no-danger */\n}\nvar CommentApp = /** @class */ (function () {\n    function CommentApp() {\n        this.utils = {\n            selectCommentsForContentPathFactory: selectors_1.selectCommentsForContentPathFactory,\n            selectCommentFactory: selectors_1.selectCommentFactory\n        };\n        this.selectors = {\n            selectComments: selectors_1.selectComments,\n            selectEnabled: selectors_1.selectEnabled,\n            selectFocused: selectors_1.selectFocused,\n            selectIsDirty: selectors_1.selectIsDirty,\n            selectCommentCount: selectors_1.selectCommentCount\n        };\n        this.actions = comments_2.commentActionFunctions;\n        this.store = redux_1.createStore(state_1.reducer, {\n            settings: settings_2.INITIAL_STATE\n        });\n        this.layout = new layout_1.LayoutController();\n    }\n    // eslint-disable-next-line camelcase\n    CommentApp.prototype.setUser = function (userId, authors) {\n        this.store.dispatch(settings_1.updateGlobalSettings({\n            user: getAuthor(authors, userId)\n        }));\n    };\n    CommentApp.prototype.updateAnnotation = function (annotation, commentId) {\n        this.attachAnnotationLayout(annotation, commentId);\n        this.store.dispatch(comments_2.updateComment(commentId, { annotation: annotation }));\n    };\n    CommentApp.prototype.attachAnnotationLayout = function (annotation, commentId) {\n        // Attach an annotation to an existing comment in the layout\n        // const layout engine know the annotation so it would position the comment correctly\n        this.layout.setCommentAnnotation(commentId, annotation);\n    };\n    CommentApp.prototype.setCurrentTab = function (tab) {\n        this.store.dispatch(settings_1.updateGlobalSettings({ currentTab: tab }));\n    };\n    CommentApp.prototype.makeComment = function (annotation, contentpath, position) {\n        if (position === void 0) { position = ''; }\n        var commentId = sequences_1.getNextCommentId();\n        this.attachAnnotationLayout(annotation, commentId);\n        // Create the comment\n        this.store.dispatch(comments_2.addComment(comments_1.newComment(contentpath, position, commentId, annotation, this.store.getState().settings.user, Date.now(), {\n            mode: 'creating',\n        })));\n        // Focus and pin the comment\n        this.store.dispatch(comments_2.setFocusedComment(commentId, { updatePinnedComment: true, forceFocus: true }));\n        return commentId;\n    };\n    CommentApp.prototype.setVisible = function (visible) {\n        this.store.dispatch(settings_1.updateGlobalSettings({\n            commentsEnabled: visible,\n        }));\n    };\n    CommentApp.prototype.invalidateContentPath = function (contentPath) {\n        // Called when a given content path on the form is no longer valid (eg, a block has been deleted)\n        this.store.dispatch(comments_2.invalidateContentPath(contentPath));\n    };\n    CommentApp.prototype.renderApp = function (element, outputElement, userId, initialComments, \n    // eslint-disable-next-line camelcase\n    authors, translationStrings) {\n        var e_1, _a, e_2, _b;\n        var _this = this;\n        var pinnedComment = null;\n        this.setUser(userId, authors);\n        var strings = translationStrings || exports.defaultStrings;\n        // Check if there is \"comment\" query parameter.\n        // If this is set, the user has clicked on a \"View on frontend\" link of an\n        // individual comment. We should focus this comment and scroll to it\n        var urlParams = new URLSearchParams(window.location.search);\n        var initialFocusedCommentId = null;\n        var commentParams = urlParams.get('comment');\n        if (commentParams) {\n            initialFocusedCommentId = parseInt(commentParams, 10);\n        }\n        var render = function () {\n            var state = _this.store.getState();\n            var commentList = Array.from(state.comments.comments.values());\n            react_dom_1[\"default\"].render(react_1[\"default\"].createElement(Form_1.CommentFormSetComponent, { comments: commentList.filter(function (comment) { return comment.mode !== 'creating'; }), remoteCommentCount: state.comments.remoteCommentCount }), outputElement);\n            // Check if the pinned comment has changed\n            if (state.comments.pinnedComment !== pinnedComment) {\n                // Tell layout controller about the pinned comment\n                // so it is moved alongside its annotation\n                _this.layout.setPinnedComment(state.comments.pinnedComment);\n                pinnedComment = state.comments.pinnedComment;\n            }\n            react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList, strings), element, function () {\n                // Render again if layout has changed (eg, a comment was added, deleted or resized)\n                // This will just update the \"top\" style attributes in the comments to get them to move\n                _this.layout.refreshDesiredPositions(state.settings.currentTab);\n                if (_this.layout.refreshLayout()) {\n                    react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList, strings), element);\n                }\n            });\n        };\n        try {\n            // Fetch existing comments\n            for (var initialComments_1 = __values(initialComments), initialComments_1_1 = initialComments_1.next(); !initialComments_1_1.done; initialComments_1_1 = initialComments_1.next()) {\n                var comment = initialComments_1_1.value;\n                var commentId = sequences_1.getNextCommentId();\n                // Create comment\n                this.store.dispatch(comments_2.addComment(comments_1.newComment(comment.contentpath, comment.position, commentId, null, getAuthor(authors, comment.user), Date.parse(comment.created_at), {\n                    remoteId: comment.pk,\n                    text: comment.text,\n                    deleted: comment.deleted,\n                    resolved: comment.resolved\n                })));\n                try {\n                    // Create replies\n                    for (var _c = (e_2 = void 0, __values(comment.replies)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var reply = _d.value;\n                        this.store.dispatch(comments_2.addReply(commentId, comments_1.newCommentReply(sequences_1.getNextReplyId(), getAuthor(authors, reply.user), Date.parse(reply.created_at), {\n                            remoteId: reply.pk,\n                            text: reply.text,\n                            deleted: reply.deleted\n                        })));\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c[\"return\"])) _b.call(_c);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                // If this is the initial focused comment. Focus and pin it\n                // eslint-disable-next-line no-warning-comments\n                // TODO: Scroll to this comment\n                if (initialFocusedCommentId && comment.pk === initialFocusedCommentId) {\n                    this.store.dispatch(comments_2.setFocusedComment(commentId, { updatePinnedComment: true, forceFocus: true }));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (initialComments_1_1 && !initialComments_1_1.done && (_a = initialComments_1[\"return\"])) _a.call(initialComments_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        render();\n        this.store.subscribe(render);\n        // Unfocus when document body is clicked\n        document.body.addEventListener('mousedown', function (e) {\n            if (e.target instanceof HTMLElement) {\n                // ignore if click target is a comment or an annotation\n                if (!e.target.closest('#comments, [data-annotation], [data-comment-add]')) {\n                    // Running store.dispatch directly here seems to prevent the event from being handled anywhere else\n                    setTimeout(function () {\n                        _this.store.dispatch(comments_2.setFocusedComment(null, { updatePinnedComment: true, forceFocus: false }));\n                    }, 200);\n                }\n            }\n        });\n        document.body.addEventListener('commentAnchorVisibilityChange', function () {\n            // If any streamfield blocks or panels have collapsed or expanded\n            // check if we need to rerender\n            _this.layout.refreshDesiredPositions(_this.store.getState().settings.currentTab);\n            if (_this.layout.refreshLayout()) {\n                render();\n            }\n        });\n    };\n    return CommentApp;\n}());\nexports.CommentApp = CommentApp;\nfunction initCommentApp() {\n    return new CommentApp();\n}\nexports.initCommentApp = initCommentApp;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.selectCommentCount = exports.selectIsDirty = exports.selectEnabled = exports.selectCommentFactory = exports.selectCommentsForContentPathFactory = exports.selectRemoteCommentCount = exports.selectFocused = exports.selectComments = void 0;\nvar reselect_1 = require(\"reselect\");\nvar selectComments = function (state) { return state.comments.comments; };\nexports.selectComments = selectComments;\nvar selectFocused = function (state) { return state.comments.focusedComment; };\nexports.selectFocused = selectFocused;\nvar selectRemoteCommentCount = function (state) { return state.comments.remoteCommentCount; };\nexports.selectRemoteCommentCount = selectRemoteCommentCount;\nfunction selectCommentsForContentPathFactory(contentpath) {\n    return reselect_1.createSelector(exports.selectComments, function (comments) {\n        return __spreadArray([], __read(comments.values())).filter(function (comment) {\n            return comment.contentpath === contentpath && !(comment.deleted || comment.resolved);\n        });\n    });\n}\nexports.selectCommentsForContentPathFactory = selectCommentsForContentPathFactory;\nfunction selectCommentFactory(localId) {\n    return reselect_1.createSelector(exports.selectComments, function (comments) {\n        var comment = comments.get(localId);\n        if (comment !== undefined && (comment.deleted || comment.resolved)) {\n            return undefined;\n        }\n        return comment;\n    });\n}\nexports.selectCommentFactory = selectCommentFactory;\nvar selectEnabled = function (state) { return state.settings.commentsEnabled; };\nexports.selectEnabled = selectEnabled;\nexports.selectIsDirty = reselect_1.createSelector(exports.selectComments, exports.selectRemoteCommentCount, function (comments, remoteCommentCount) {\n    if (remoteCommentCount !== comments.size) {\n        return true;\n    }\n    return Array.from(comments.values()).some(function (comment) {\n        if (comment.deleted ||\n            comment.resolved ||\n            comment.replies.size !== comment.remoteReplyCount ||\n            comment.originalText !== comment.text) {\n            return true;\n        }\n        return Array.from(comment.replies.values()).some(function (reply) { return reply.deleted || reply.originalText !== reply.text; });\n    });\n});\nvar selectCommentCount = function (state) { return (__spreadArray([], __read(state.comments.comments.values())).filter(function (comment) { return !comment.deleted && !comment.resolved; }).length); };\nexports.selectCommentCount = selectCommentCount;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.reducer = exports.INITIAL_STATE = exports.newComment = exports.newCommentReply = void 0;\nvar actions = __importStar(require(\"../actions/comments\"));\nvar utils_1 = require(\"./utils\");\nvar immer_1 = __importStar(require(\"immer\"));\nimmer_1.enableES5();\nimmer_1.enableMapSet();\nfunction newCommentReply(localId, author, date, _a) {\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.deleted, deleted = _e === void 0 ? false : _e;\n    return {\n        localId: localId,\n        remoteId: remoteId,\n        mode: mode,\n        author: author,\n        date: date,\n        text: text,\n        originalText: text,\n        newText: '',\n        deleted: deleted,\n    };\n}\nexports.newCommentReply = newCommentReply;\nfunction newComment(contentpath, position, localId, annotation, author, date, _a) {\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.resolved, resolved = _e === void 0 ? false : _e, _f = _a.deleted, deleted = _f === void 0 ? false : _f, _g = _a.replies, replies = _g === void 0 ? new Map() : _g;\n    return {\n        contentpath: contentpath,\n        position: position,\n        localId: localId,\n        annotation: annotation,\n        remoteId: remoteId,\n        mode: mode,\n        author: author,\n        date: date,\n        text: text,\n        originalText: text,\n        replies: replies,\n        newReply: '',\n        newText: '',\n        deleted: deleted,\n        resolved: resolved,\n        remoteReplyCount: Array.from(replies.values()).reduce(function (n, reply) { return (reply.remoteId !== null ? n + 1 : n); }, 0),\n    };\n}\nexports.newComment = newComment;\nexports.INITIAL_STATE = {\n    comments: new Map(),\n    forceFocus: false,\n    focusedComment: null,\n    pinnedComment: null,\n    remoteCommentCount: 0,\n};\nexports.reducer = immer_1[\"default\"](function (draft, action) {\n    var e_1, _a;\n    /* eslint-disable no-param-reassign */\n    var deleteComment = function (comment) {\n        if (!comment.remoteId) {\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\n            draft.comments[\"delete\"](comment.localId);\n        }\n        else {\n            comment.deleted = true;\n        }\n        // Unset focusedComment if the focused comment is the one being deleted\n        if (draft.focusedComment === comment.localId) {\n            draft.focusedComment = null;\n            draft.forceFocus = false;\n        }\n        if (draft.pinnedComment === comment.localId) {\n            draft.pinnedComment = null;\n        }\n    };\n    var resolveComment = function (comment) {\n        if (!comment.remoteId) {\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\n            draft.comments[\"delete\"](comment.localId);\n        }\n        else {\n            comment.resolved = true;\n        }\n        // Unset focusedComment if the focused comment is the one being resolved\n        if (draft.focusedComment === comment.localId) {\n            draft.focusedComment = null;\n        }\n        if (draft.pinnedComment === comment.localId) {\n            draft.pinnedComment = null;\n        }\n    };\n    switch (action.type) {\n        case actions.ADD_COMMENT: {\n            draft.comments.set(action.comment.localId, action.comment);\n            if (action.comment.remoteId) {\n                draft.remoteCommentCount += 1;\n            }\n            break;\n        }\n        case actions.UPDATE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (comment) {\n                if (action.update.newText && action.update.newText.length === 0) {\n                    break;\n                }\n                utils_1.update(comment, action.update);\n            }\n            break;\n        }\n        case actions.DELETE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            deleteComment(comment);\n            break;\n        }\n        case actions.RESOLVE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            resolveComment(comment);\n            break;\n        }\n        case actions.SET_FOCUSED_COMMENT: {\n            if ((action.commentId === null) || (draft.comments.has(action.commentId))) {\n                draft.focusedComment = action.commentId;\n                if (action.updatePinnedComment) {\n                    draft.pinnedComment = action.commentId;\n                }\n                draft.forceFocus = action.forceFocus;\n            }\n            break;\n        }\n        case actions.ADD_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if ((!comment) || action.reply.text.length === 0) {\n                break;\n            }\n            if (action.reply.remoteId) {\n                comment.remoteReplyCount += 1;\n            }\n            comment.replies.set(action.reply.localId, action.reply);\n            break;\n        }\n        case actions.UPDATE_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            var reply = comment.replies.get(action.replyId);\n            if (!reply) {\n                break;\n            }\n            if (action.update.newText && action.update.newText.length === 0) {\n                break;\n            }\n            utils_1.update(reply, action.update);\n            break;\n        }\n        case actions.DELETE_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            var reply = comment.replies.get(action.replyId);\n            if (!reply) {\n                break;\n            }\n            if (!reply.remoteId) {\n                // The reply doesn't exist in the database, so we don't need to store it locally\n                comment.replies[\"delete\"](reply.localId);\n            }\n            else {\n                reply.deleted = true;\n            }\n            break;\n        }\n        case actions.INVALIDATE_CONTENT_PATH: {\n            // Delete any comments that exist in the contentpath\n            var comments = draft.comments;\n            try {\n                for (var _b = __values(comments.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var comment = _c.value;\n                    if (comment.contentpath.startsWith(action.contentPath)) {\n                        resolveComment(comment);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            break;\n        }\n        default:\n            break;\n    }\n}, exports.INITIAL_STATE);\n","\"use strict\";\nexports.__esModule = true;\nexports.reducer = void 0;\nvar redux_1 = require(\"redux\");\nvar comments_1 = require(\"./comments\");\nvar settings_1 = require(\"./settings\");\nexports.reducer = redux_1.combineReducers({\n    comments: comments_1.reducer,\n    settings: settings_1.reducer,\n});\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.reducer = exports.INITIAL_STATE = void 0;\nvar actions = __importStar(require(\"../actions/settings\"));\nvar utils_1 = require(\"./utils\");\nvar immer_1 = __importDefault(require(\"immer\"));\n// Reducer with initial state\nexports.INITIAL_STATE = {\n    user: null,\n    commentsEnabled: false,\n    currentTab: null,\n};\nexports.reducer = immer_1[\"default\"](function (draft, action) {\n    switch (action.type) {\n        case actions.UPDATE_GLOBAL_SETTINGS:\n            utils_1.update(draft, action.update);\n            break;\n        default:\n            break;\n    }\n}, exports.INITIAL_STATE);\n","\"use strict\";\nexports.__esModule = true;\nexports.update = void 0;\nfunction update(base, updatePartial) {\n    return Object.assign(base, updatePartial);\n}\nexports.update = update;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nexports.__esModule = true;\nexports.LayoutController = void 0;\nvar maps_1 = require(\"./maps\");\nvar GAP = 20.0; // Gap between comments in pixels\nvar TOP_MARGIN = 100.0; // Spacing from the top to the first comment in pixels\nvar OFFSET = -50; // How many pixels from the annotation position should the comments be placed?\nvar LayoutController = /** @class */ (function () {\n    function LayoutController() {\n        this.commentElements = new Map();\n        this.commentAnnotations = new Map();\n        this.commentTabs = new Map();\n        this.commentDesiredPositions = new Map();\n        this.commentHeights = new Map();\n        this.pinnedComment = null;\n        this.commentCalculatedPositions = new Map();\n        this.isDirty = false;\n    }\n    LayoutController.prototype.setCommentElement = function (commentId, element) {\n        if (element !== null) {\n            this.commentElements.set(commentId, element);\n        }\n        else {\n            this.commentElements[\"delete\"](commentId);\n        }\n        this.isDirty = true;\n    };\n    LayoutController.prototype.setCommentAnnotation = function (commentId, annotation) {\n        this.commentAnnotations.set(commentId, annotation);\n        this.commentTabs.set(commentId, annotation.getTab() || null);\n        this.updateDesiredPosition(commentId);\n        this.isDirty = true;\n    };\n    LayoutController.prototype.setCommentHeight = function (commentId, height) {\n        if (this.commentHeights.get(commentId) !== height) {\n            this.commentHeights.set(commentId, height);\n            this.isDirty = true;\n        }\n    };\n    LayoutController.prototype.setPinnedComment = function (commentId) {\n        this.pinnedComment = commentId;\n        this.isDirty = true;\n    };\n    LayoutController.prototype.updateDesiredPosition = function (commentId) {\n        var annotation = this.commentAnnotations.get(commentId);\n        if (!annotation) {\n            return;\n        }\n        var currentNodeTop = annotation.getAnchorNode(commentId === this.pinnedComment).getBoundingClientRect().top;\n        this.commentDesiredPositions.set(commentId, currentNodeTop !== 0 ? currentNodeTop + document.documentElement.scrollTop + OFFSET : 0);\n    };\n    LayoutController.prototype.refreshDesiredPositions = function (tab) {\n        var _this = this;\n        if (tab === void 0) { tab = null; }\n        /* Finds the current annotation positions of all the comments on the specified tab */\n        var oldDesiredPositions = new Map(this.commentDesiredPositions);\n        this.commentAnnotations.forEach(function (_, commentId) {\n            if (_this.getCommentTabVisible(tab, commentId)) {\n                _this.updateDesiredPosition(commentId);\n            }\n        });\n        // It's not great to be recalculating all positions so regularly, but Wagtail's FE widgets\n        // aren't very constrained so could change layout in any number of ways. If we have a stable FE\n        // widget framework in the future, this could be used to trigger the position refresh more\n        // intelligently, or alternatively once comments is incorporated into the page form, a\n        // MutationObserver could potentially track most types of changes.\n        if (this.commentDesiredPositions !== oldDesiredPositions) {\n            this.isDirty = true;\n        }\n    };\n    LayoutController.prototype.refreshLayout = function () {\n        var _this = this;\n        /* Updates positions of all comments based on their annotation locations, and resolves any overlapping comments */\n        if (!this.isDirty) {\n            return false;\n        }\n        // Build list of blocks (starting with one for each comment)\n        var allBlocks = Array.from(this.commentElements.keys()).map(function (commentId) { return ({\n            tab: maps_1.getOrDefault(_this.commentTabs, commentId, null),\n            position: maps_1.getOrDefault(_this.commentDesiredPositions, commentId, 0),\n            height: maps_1.getOrDefault(_this.commentHeights, commentId, 0),\n            comments: [commentId],\n            containsPinnedComment: _this.pinnedComment !== null && commentId === _this.pinnedComment,\n            pinnedCommentPosition: 0,\n        }); });\n        // Group blocks by tabs\n        var blocksByTab = new Map();\n        allBlocks.forEach(function (block) {\n            var blocks = blocksByTab.get(block.tab) || [];\n            blocks.push(block);\n            blocksByTab.set(block.tab, blocks);\n        });\n        // Get location of pinned comment\n        var pinnedCommentPosition = this.pinnedComment ?\n            this.commentDesiredPositions.get(this.pinnedComment) : undefined;\n        var pinnedCommentTab = this.pinnedComment ?\n            this.commentTabs.get(this.pinnedComment) : undefined;\n        // For each tab, resolve positions of all the comments\n        Array.from(blocksByTab.entries()).forEach(function (_a) {\n            var e_1, _b, _c;\n            var _d = __read(_a, 2), tab = _d[0], blocks = _d[1];\n            var pinnedCommentOnThisTab = _this.pinnedComment && pinnedCommentTab === tab;\n            // Sort blocks\n            blocks.sort(function (block, comparisonBlock) { return block.position - comparisonBlock.position; });\n            // Resolve overlapping blocks\n            var currentBlocks = blocks;\n            var overlaps = true;\n            while (overlaps) {\n                overlaps = false;\n                var newBlocks = [];\n                var previousBlock = null;\n                try {\n                    for (var currentBlocks_1 = (e_1 = void 0, __values(currentBlocks)), currentBlocks_1_1 = currentBlocks_1.next(); !currentBlocks_1_1.done; currentBlocks_1_1 = currentBlocks_1.next()) {\n                        var block = currentBlocks_1_1.value;\n                        if (previousBlock) {\n                            if (previousBlock.position + previousBlock.height + GAP >\n                                block.position) {\n                                overlaps = true;\n                                // Merge the blocks\n                                (_c = previousBlock.comments).push.apply(_c, __spreadArray([], __read(block.comments)));\n                                if (block.containsPinnedComment) {\n                                    previousBlock.containsPinnedComment = true;\n                                    previousBlock.pinnedCommentPosition =\n                                        block.pinnedCommentPosition + previousBlock.height;\n                                }\n                                previousBlock.height += block.height;\n                                // Make sure comments don't disappear off the top of the page\n                                // But only if a comment isn't focused\n                                if (!pinnedCommentOnThisTab &&\n                                    previousBlock.position < TOP_MARGIN + OFFSET) {\n                                    previousBlock.position =\n                                        TOP_MARGIN + previousBlock.height - OFFSET;\n                                }\n                                // If this block contains the focused comment, position it so\n                                // the focused comment is in it's desired position\n                                if (pinnedCommentPosition &&\n                                    previousBlock.containsPinnedComment) {\n                                    previousBlock.position =\n                                        pinnedCommentPosition -\n                                            previousBlock.pinnedCommentPosition;\n                                }\n                                continue;\n                            }\n                        }\n                        newBlocks.push(block);\n                        previousBlock = block;\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (currentBlocks_1_1 && !currentBlocks_1_1.done && (_b = currentBlocks_1[\"return\"])) _b.call(currentBlocks_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                currentBlocks = newBlocks;\n            }\n            // Write positions\n            currentBlocks.forEach(function (block) {\n                var currentPosition = block.position;\n                block.comments.forEach(function (commentId) {\n                    _this.commentCalculatedPositions.set(commentId, currentPosition);\n                    var height = _this.commentHeights.get(commentId);\n                    if (height) {\n                        currentPosition += height + GAP;\n                    }\n                });\n            });\n        });\n        this.isDirty = false;\n        return true;\n    };\n    LayoutController.prototype.getCommentTabVisible = function (tab, commentId) {\n        var commentTab = maps_1.getOrDefault(this.commentTabs, commentId, null);\n        return commentTab === tab;\n    };\n    LayoutController.prototype.getCommentVisible = function (tab, commentId) {\n        return this.getCommentTabVisible(tab, commentId) && maps_1.getOrDefault(this.commentDesiredPositions, commentId, 1) > 0;\n    };\n    LayoutController.prototype.getCommentPosition = function (commentId) {\n        if (this.commentCalculatedPositions.has(commentId)) {\n            return this.commentCalculatedPositions.get(commentId);\n        }\n        return this.commentDesiredPositions.get(commentId);\n    };\n    return LayoutController;\n}());\nexports.LayoutController = LayoutController;\n","\"use strict\";\nexports.__esModule = true;\nexports.getOrDefault = void 0;\nfunction getOrDefault(map, key, defaultValue) {\n    var value = map.get(key);\n    if (typeof value === 'undefined') {\n        return defaultValue;\n    }\n    return value;\n}\nexports.getOrDefault = getOrDefault;\n","\"use strict\";\nexports.__esModule = true;\nexports.getNextReplyId = exports.getNextCommentId = void 0;\nvar nextCommentId = 1;\nvar nextReplyId = 1;\nfunction getNextCommentId() {\n    return nextCommentId++;\n}\nexports.getNextCommentId = getNextCommentId;\nfunction getNextReplyId() {\n    return nextReplyId++;\n}\nexports.getNextReplyId = getNextReplyId;\n","\"use strict\";\nexports.__esModule = true;\nvar main_1 = require(\"../../components/CommentApp/main\");\nvar wagtailConfig_1 = require(\"../../config/wagtailConfig\");\nvar KEYCODE_M = 77;\n/**\n * Entry point loaded when the comments system is in use.\n */\nwindow.comments = (function () {\n    var commentApp = main_1.initCommentApp();\n    /**\n    * Returns true if the provided keyboard event is using the 'add/focus comment' keyboard\n    * shortcut\n    */\n    function isCommentShortcut(e) {\n        return (e.ctrlKey || e.metaKey) && e.altKey && e.keyCode === KEYCODE_M;\n    }\n    function getContentPath(fieldNode) {\n        // Return the total contentpath for an element as a string, in the form field.streamfield_uid.block...\n        if (fieldNode.closest('data-contentpath-disabled')) {\n            return '';\n        }\n        var element = fieldNode.closest('[data-contentpath]');\n        var contentpaths = [];\n        while (element !== null) {\n            contentpaths.push(element.dataset.contentpath);\n            element = element.parentElement.closest('[data-contentpath]');\n        }\n        contentpaths.reverse();\n        return contentpaths.join('.');\n    }\n    /**\n     * Controls the positioning of a field level comment, and the display of the button\n     * used to focus and pin the attached comment\n     * `getAnchorNode` is called by the comments app to determine which node to\n     * float the comment alongside\n     */\n    var BasicFieldLevelAnnotation = /** @class */ (function () {\n        /**\n        * Create a field-level annotation\n        * @param {Element} fieldNode - an element to provide the comment position\n        * @param {Element} node - the button to focus/pin the comment\n        */\n        function BasicFieldLevelAnnotation(fieldNode, node) {\n            this.node = node;\n            this.fieldNode = fieldNode;\n            this.unsubscribe = null;\n        }\n        /**\n        * Subscribes the annotation to update when the state of a particular comment changes,\n        * and to focus that comment when clicked\n        * @param {number} localId - the localId of the comment to subscribe to\n        */\n        BasicFieldLevelAnnotation.prototype.subscribeToUpdates = function (localId) {\n            var _this = this;\n            var _a = commentApp.selectors, selectFocused = _a.selectFocused, selectEnabled = _a.selectEnabled;\n            var selectComment = commentApp.utils.selectCommentFactory(localId);\n            var store = commentApp.store;\n            var initialState = store.getState();\n            var focused = selectFocused(initialState) === localId;\n            var shown = selectEnabled(initialState);\n            if (focused) {\n                this.onFocus();\n            }\n            if (shown) {\n                this.show();\n            }\n            this.unsubscribe = store.subscribe(function () {\n                var state = store.getState();\n                var comment = selectComment(state);\n                if (!comment) {\n                    _this.onDelete();\n                }\n                var nowFocused = (selectFocused(state) === localId);\n                if (nowFocused !== focused) {\n                    if (focused) {\n                        _this.onUnfocus();\n                    }\n                    else {\n                        _this.onFocus();\n                    }\n                    focused = nowFocused;\n                }\n                if (shown !== selectEnabled(state)) {\n                    if (shown) {\n                        _this.hide();\n                    }\n                    else {\n                        _this.show();\n                    }\n                    shown = selectEnabled(state);\n                }\n            });\n            this.setOnClickHandler(localId);\n        };\n        BasicFieldLevelAnnotation.prototype.onDelete = function () {\n            // IE11\n            if (!this.node.remove) {\n                this.node.parentNode.removeChild(this.node);\n            }\n            else {\n                this.node.remove();\n            }\n            if (this.unsubscribe) {\n                this.unsubscribe();\n            }\n        };\n        BasicFieldLevelAnnotation.prototype.onFocus = function () {\n            this.node.classList.remove('button-secondary');\n            this.node.ariaLabel = wagtailConfig_1.STRINGS.UNFOCUS_COMMENT;\n        };\n        BasicFieldLevelAnnotation.prototype.onUnfocus = function () {\n            this.node.classList.add('button-secondary');\n            this.node.ariaLabel = wagtailConfig_1.STRINGS.FOCUS_COMMENT;\n            // eslint-disable-next-line no-warning-comments\n            // TODO: ensure comment is focused accessibly when this is clicked,\n            // and that screenreader users can return to the annotation point when desired\n        };\n        BasicFieldLevelAnnotation.prototype.show = function () {\n            this.node.classList.remove('u-hidden');\n        };\n        BasicFieldLevelAnnotation.prototype.hide = function () {\n            this.node.classList.add('u-hidden');\n        };\n        BasicFieldLevelAnnotation.prototype.setOnClickHandler = function (localId) {\n            this.node.addEventListener('click', function () {\n                commentApp.store.dispatch(commentApp.actions.setFocusedComment(localId, { updatePinnedComment: true, forceFocus: true }));\n            });\n        };\n        BasicFieldLevelAnnotation.prototype.getTab = function () {\n            var _a;\n            return (_a = this.fieldNode.closest('section[data-tab]')) === null || _a === void 0 ? void 0 : _a.getAttribute('data-tab');\n        };\n        BasicFieldLevelAnnotation.prototype.getAnchorNode = function () {\n            return this.fieldNode;\n        };\n        return BasicFieldLevelAnnotation;\n    }());\n    var FieldLevelCommentWidget = /** @class */ (function () {\n        function FieldLevelCommentWidget(_a) {\n            var fieldNode = _a.fieldNode, commentAdditionNode = _a.commentAdditionNode, annotationTemplateNode = _a.annotationTemplateNode;\n            this.fieldNode = fieldNode;\n            this.contentpath = getContentPath(fieldNode);\n            this.commentAdditionNode = commentAdditionNode;\n            this.annotationTemplateNode = annotationTemplateNode;\n            this.shown = false;\n        }\n        FieldLevelCommentWidget.prototype.register = function () {\n            var _this = this;\n            var selectEnabled = commentApp.selectors.selectEnabled;\n            var initialState = commentApp.store.getState();\n            var currentlyEnabled = selectEnabled(initialState);\n            var selectCommentsForContentPath = commentApp.utils.selectCommentsForContentPathFactory(this.contentpath);\n            var currentComments = selectCommentsForContentPath(initialState);\n            this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\n            var unsubscribeWidget = commentApp.store.subscribe(function () {\n                var state = commentApp.store.getState();\n                var newComments = selectCommentsForContentPath(state);\n                var newEnabled = selectEnabled(state);\n                var commentsChanged = (currentComments !== newComments);\n                var enabledChanged = (currentlyEnabled !== newEnabled);\n                if (commentsChanged) {\n                    // Add annotations for any new comments\n                    currentComments = newComments;\n                    currentComments.filter(function (comment) { return comment.annotation === null; }).forEach(function (comment) {\n                        var annotation = _this.getAnnotationForComment(comment);\n                        commentApp.updateAnnotation(annotation, comment.localId);\n                        annotation.subscribeToUpdates(comment.localId);\n                    });\n                }\n                if (enabledChanged || commentsChanged) {\n                    // If comments have been enabled or disabled, or the comments have changed\n                    // check whether to show the widget (if comments are enabled and there are no existing comments)\n                    currentlyEnabled = newEnabled;\n                    _this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\n                }\n            });\n            initialState.comments.comments.forEach(function (comment) {\n                // Add annotations for any comments already in the store\n                if (comment.contentpath === _this.contentpath) {\n                    var annotation = _this.getAnnotationForComment(comment);\n                    commentApp.updateAnnotation(annotation, comment.localId);\n                    annotation.subscribeToUpdates(comment.localId);\n                }\n            });\n            var addComment = function () {\n                var annotation = _this.getAnnotationForComment();\n                var localId = commentApp.makeComment(annotation, _this.contentpath);\n                annotation.subscribeToUpdates(localId);\n            };\n            this.commentAdditionNode.addEventListener('click', function () {\n                // Make the widget button clickable to add a comment\n                addComment();\n            });\n            this.fieldNode.addEventListener('keyup', function (e) {\n                if (currentlyEnabled && isCommentShortcut(e)) {\n                    if (currentComments.length === 0) {\n                        addComment();\n                    }\n                    else {\n                        commentApp.store.dispatch(commentApp.actions.setFocusedComment(currentComments[0].localId, { updatePinnedComment: true, forceFocus: true }));\n                    }\n                }\n            });\n            // eslint-disable-next-line no-warning-comments\n            return unsubscribeWidget; // TODO: listen for widget deletion and use this\n        };\n        FieldLevelCommentWidget.prototype.updateVisibility = function (newShown) {\n            if (newShown === this.shown) {\n                return;\n            }\n            this.shown = newShown;\n            if (!this.shown) {\n                this.commentAdditionNode.classList.add('u-hidden');\n            }\n            else {\n                this.commentAdditionNode.classList.remove('u-hidden');\n            }\n        };\n        FieldLevelCommentWidget.prototype.getAnnotationForComment = function () {\n            var annotationNode = this.annotationTemplateNode.cloneNode(true);\n            annotationNode.id = '';\n            annotationNode.classList.remove('u-hidden');\n            this.commentAdditionNode.insertAdjacentElement('afterend', annotationNode);\n            return new BasicFieldLevelAnnotation(this.fieldNode, annotationNode, commentApp);\n        };\n        return FieldLevelCommentWidget;\n    }());\n    function initAddCommentButton(buttonElement) {\n        var widget = new FieldLevelCommentWidget({\n            fieldNode: buttonElement.closest('[data-contentpath]'),\n            commentAdditionNode: buttonElement,\n            annotationTemplateNode: document.querySelector('#comment-icon'),\n        });\n        if (widget.contentpath) {\n            widget.register();\n        }\n    }\n    function initCommentsInterface(formElement) {\n        var commentsElement = document.getElementById('comments');\n        var commentsOutputElement = document.getElementById('comments-output');\n        var dataElement = document.getElementById('comments-data');\n        if (!commentsElement || !commentsOutputElement || !dataElement) {\n            throw new Error('Comments app failed to initialise. Missing HTML element');\n        }\n        var data = JSON.parse(dataElement.textContent);\n        commentApp.renderApp(commentsElement, commentsOutputElement, data.user, data.comments, new Map(Object.entries(data.authors)), wagtailConfig_1.STRINGS);\n        Array.from(formElement.querySelectorAll('[data-component=\"add-comment-button\"]')).forEach(initAddCommentButton);\n        // Attach the commenting app to the tab navigation, if it exists\n        var tabNavElement = formElement.querySelector('[data-tab-nav]');\n        if (tabNavElement) {\n            commentApp.setCurrentTab(tabNavElement.dataset.currentTab);\n            tabNavElement.addEventListener('switch', function (e) {\n                commentApp.setCurrentTab(e.detail.tab);\n            });\n        }\n        // Comments toggle\n        var commentToggleWrapper = formElement.querySelector('.comments-toggle');\n        var commentToggle = formElement.querySelector('.comments-toggle input[type=checkbox]');\n        var tabContentElement = formElement.querySelector('.tab-content');\n        var commentNotificationsToggleButton = formElement.querySelector('.comment-notifications-toggle-button');\n        var commentNotificationsDropdown = formElement.querySelector('.comment-notifications-dropdown');\n        var updateCommentVisibility = function (visible) {\n            // Show/hide comments\n            commentApp.setVisible(visible);\n            // Add/Remove tab-nav--comments-enabled class. This changes the size of streamfields\n            if (visible) {\n                tabContentElement.classList.add('tab-content--comments-enabled');\n                commentToggleWrapper.classList.add('comments-toggle--active');\n                commentNotificationsToggleButton.classList.add('comment-notifications-toggle-button--active');\n            }\n            else {\n                tabContentElement.classList.remove('tab-content--comments-enabled');\n                commentToggleWrapper.classList.remove('comments-toggle--active');\n                commentNotificationsToggleButton.classList.remove('comment-notifications-toggle-button--active');\n                commentNotificationsDropdown.classList.remove('comment-notifications-dropdown--active');\n                commentNotificationsToggleButton.classList.remove('comment-notifications-toggle-button--icon-toggle');\n            }\n        };\n        commentNotificationsToggleButton.addEventListener('click', function () {\n            commentNotificationsDropdown.classList.toggle('comment-notifications-dropdown--active');\n            commentNotificationsToggleButton.classList.toggle('comment-notifications-toggle-button--icon-toggle');\n        });\n        commentToggle.addEventListener('change', function (e) {\n            updateCommentVisibility(e.target.checked);\n        });\n        updateCommentVisibility(commentToggle.checked);\n        // Keep number of comments up to date with comment app\n        var commentCounter = formElement.querySelector('.comments-toggle__count');\n        var updateCommentCount = function () {\n            var commentCount = commentApp.selectors.selectCommentCount(commentApp.store.getState());\n            if (commentCount > 0) {\n                commentCounter.innerText = commentCount.toString();\n            }\n            else {\n                // Note: CSS will hide the circle when its content is empty\n                commentCounter.innerText = '';\n            }\n        };\n        commentApp.store.subscribe(updateCommentCount);\n        updateCommentCount();\n    }\n    return {\n        commentApp: commentApp,\n        getContentPath: getContentPath,\n        isCommentShortcut: isCommentShortcut,\n        initAddCommentButton: initAddCommentButton,\n        initCommentsInterface: initCommentsInterface,\n    };\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 324;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t324: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tfor(moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) var result = runtime(__webpack_require__);\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkwagtail\"] = globalThis[\"webpackChunkwagtail\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [751], () => (__webpack_require__(68251)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [751], () => (__webpack_require__(90971)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"sourceRoot":""}